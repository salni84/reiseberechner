@import "stylesheets/sdx/variables/global";
@import "stylesheets/sdx/variables/colors";
@import "stylesheets/sdx/variables/sizes";
@import "stylesheets/sdx/mixins/misc";

$space-before-text: $baseline-4 + 5px; // +5px fine adjustment
$margin-inline: $baseline-4 - 5px; // -5px fine adjustment

:host {
  display: inline-block;
  max-width: 100%;
}

// Inline
:host(.inline) {
  display: inline-block;
  margin-right: $margin-inline;
}

.component {
  display: flex;
  flex-flow: column;

  ::slotted([slot="description"]) {
    display: block;
    font-weight: 400;
    line-height: 24px;
    letter-spacing: 0;
    font-size: 16px;
    padding-top: 5px;
    padding-left: $space-before-text;
    color: $color-gray-tint-4;
  }

  >label {
    cursor: pointer;
    position: relative;
    padding-left: $space-before-text;
    color: $color-checkbox-label;
    font-weight: 400;
    line-height: 24px;
    font-size: 18px;
    margin-bottom: 0; // polyfill

    >input {
      position: absolute;
      opacity: 0;
      height: 0;
      width: 0;

      + .sdx-icon::before {
        content: "";
        position: absolute;
        margin-left: -$space-before-text;
        margin-top: 1px;
      }
    }
  }
}

// Checkbox specific styles
.component.checkbox {
  &.invalid {
    >label {
      >input {
        + .sdx-icon::before {
          border-color: $color-input-invalid-form;
        }
      }
    }
  }

  >label {
    // Hover
    &:hover {
      >input {
        + .sdx-icon sdx-icon {
          color: $color-checkbox-empty;
          transform: scale(0.5) translateZ(0);
        }
      }

      >input:checked {
        + .sdx-icon::before {
          border: 2px solid $color-checkbox-fill-hover;
        }

        + .sdx-icon sdx-icon {
          color: $color-checkbox-fill;
        }
      }
    }

    >input {
      + .sdx-icon::before {
        border: 2px solid $color-checkbox-empty;
        border-radius: $border-radius;
        width: $checkbox-size;
        height: $checkbox-size;
        transition: all 300ms $standard-easing;
      }

      + .sdx-icon sdx-icon {
        position: absolute;
        margin-left: -$space-before-text + 3px; // 3px fine adjustment
        color: $color-gray-tint-6;
        transform: scale(0) translateZ(0);
        transition: all 200ms $standard-easing;
        transform-origin: 50% 50%;
      }

      // Focus
      &:focus {
        + .sdx-icon::before {
          border: 2px solid $color-checkbox-focus;
        }
      }

      // Checked
      &:checked {
        + .sdx-icon::before {
          border: 2px solid $color-checkbox-fill;
        }

        + .sdx-icon sdx-icon {
          color: $color-checkbox-fill;
          transform: scale(1) translateZ(0);
        }
      }
      &:checked:focus {
        + .sdx-icon::before {
          border: 2px solid $color-checkbox-focus;
        }

        + .sdx-icon sdx-icon {
          color: $color-checkbox-focus;
          transform: scale(1) translateZ(0);
        }
      }
    }
  }

  // Disabled checkbox
  // (make sure checkboxes don't react on mouseover)
  &.disabled >label >input {
    + .sdx-icon sdx-icon {
      transform: scale(0) translateZ(0);
    }

    &:checked + .sdx-icon {
      sdx-icon {
        transform: scale(1) translateZ(0);
      }

      &::before {
        border-color: $color-checkbox-fill;
      }
    }
  }
}

// Radio specific styles
.component.radio {
  // Hover
  >label {
    &:hover {
      >input {
        + .sdx-icon::after {
          transform: scale(0.5) translateZ(0);
        }
      }

      >input:checked {
        + .sdx-icon::before {
          border: 2px solid $color-radio-fill-active;
        }

        + .sdx-icon::after {
          border: 5px solid $color-radio-fill-active;
          transform: scale(1) translateZ(0);
        }
      }
    }

    >input {
      + .sdx-icon::before {
        border: 2px solid $color-radio-empty;
        border-radius: 50%;
        width: $radio-size;
        height: $radio-size;
        transition: border color 2000ms $standard-easing;
      }

      + .sdx-icon::after {
        content: "";
        position: absolute;
        margin-left: -$space-before-text + 6px; // 6px fine adjustment
        margin-top: 7px;
        border: 5px solid $color-radio-empty;
        border-radius: 50%;
        transform: scale(0) translateZ(0);
        transition: transform 200ms $standard-easing;
        transform-origin: 50% 50%;
      }

      // Focus
      &:focus {
        + .sdx-icon::before {
          border: 2px solid $color-radio-fill;
        }
      }

      // Checked
      &:checked {
        + .sdx-icon::before {
          border: 2px solid $color-radio-fill;
        }

        + .sdx-icon::after {
          border: 5px solid $color-radio-fill;
          transform: scale(1) translateZ(0);
        }

        // Checked and Focused
        &:focus + .sdx-icon {
          &::before,
          &::after {
            border-color: $color-radio-fill-active;
          }
        }
      }
    }
  }

  // Disabled
  // (make sure radio buttons don't react on mouseover)
  &.disabled >label >input {
    + .sdx-icon::before {
      filter: inherit;
    }

    + .sdx-icon::after {
      transform: scale(0) translateZ(0);
    }

    &:checked + .sdx-icon {
      &::before,
      &::after {
        border-color: $color-radio-fill;
        transform: scale(1) translateZ(0);
      }
    }
  }
}

// Disabled
.component.disabled {
  @include disabled-label;

  ::slotted([slot="description"]) {
    opacity: .4;
  }
}
