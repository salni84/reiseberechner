import * as tslib_1 from "tslib";
import { searchAndInitialize, preventDefault } from "../Utils";
import anime from "animejs";
import { hasClass, addClass, removeClass } from "../DomFunctions";
import DomElement from "../DomElement";
var CLASS_OPEN = "is-open";
var CLASS_ACTIVE = "is-active";
var QUERY_SITE_WRAPPER = ".js-site-wrapper";
var QUERY_NAV_HAMBURGER = ".js-site-wrapper .js-hamburger";
var QUERY_NAV_ITEM = ".js-nav-item";
var NAV_LINK_INITIAL_SCALE = 0.9;
var ANIMATION_DURATION_LINKS = 100;
var ANIMATION_DURATION_NAV = 300;
var ANIMATION_STAGGER_DELAY = 50;
/**
 * The navigation side component definition.
 */
var NavigationSide = /** @class */ (function (_super) {
    tslib_1.__extends(NavigationSide, _super);
    function NavigationSide(element) {
        var _this = _super.call(this, element) || this;
        _this._clickHandler = _this._handleClick.bind(_this);
        _this._windowClickHandler = _this._handleWindowClick.bind(_this);
        _this._siteWrapper = document.querySelector(QUERY_SITE_WRAPPER);
        _this._hamburgerElement = document.querySelector(QUERY_NAV_HAMBURGER) || document.createElement("div");
        _this._navItems = _this.element.querySelectorAll(QUERY_NAV_ITEM);
        _this._initialize();
        return _this;
    }
    NavigationSide.prototype._initialize = function () {
        this._hamburgerElement.addEventListener("click", this._clickHandler);
        this._hamburgerElement.addEventListener("touchend", this._clickHandler);
    };
    NavigationSide.prototype._handleClick = function (event) {
        preventDefault(event);
        this.toggle();
    };
    NavigationSide.prototype._handleWindowClick = function (event) {
        var target = event.target;
        while (target !== this.element && target.parentElement) {
            target = target.parentElement;
        }
        if (target !== this.element) {
            this.close();
            return false;
        }
        return true;
    };
    /**
     * Toggles the side navigation.
     */
    NavigationSide.prototype.toggle = function () {
        if (hasClass(this.element, CLASS_OPEN) === false) {
            this.open();
        }
        else {
            this.close();
        }
    };
    /**
     * Opens the slide navigation.
     */
    NavigationSide.prototype.open = function () {
        var _this = this;
        setTimeout(function () {
            window.addEventListener("click", _this._windowClickHandler);
            window.addEventListener("touchend", _this._windowClickHandler);
        }, 50);
        addClass(this._hamburgerElement, CLASS_ACTIVE);
        addClass(this.element, CLASS_OPEN);
        addClass(this._siteWrapper, CLASS_OPEN);
        var x = anime.timeline();
        var off = ANIMATION_DURATION_NAV;
        this._navItems.forEach(function (element) {
            var el = element;
            el.style.opacity = "0";
            el.style.transform = "scale(" + NAV_LINK_INITIAL_SCALE + ")";
            x.add({
                targets: el,
                duration: ANIMATION_DURATION_LINKS,
                opacity: 1,
                scale: 1,
                easing: "linear",
                offset: off
            });
            off += ANIMATION_STAGGER_DELAY;
        });
    };
    /**
     * Closes the side navigation.
     */
    NavigationSide.prototype.close = function () {
        window.removeEventListener("click", this._windowClickHandler);
        window.removeEventListener("touchend", this._windowClickHandler);
        removeClass(this._hamburgerElement, CLASS_ACTIVE);
        removeClass(this.element, CLASS_OPEN);
        removeClass(this._siteWrapper, CLASS_OPEN);
    };
    /**
     * Destroys the component and removes all event
     * subscriptions and references.
     */
    NavigationSide.prototype.destroy = function () {
        window.removeEventListener("click", this._windowClickHandler);
        window.removeEventListener("touchend", this._windowClickHandler);
        this._windowClickHandler = null;
        this._clickHandler = null;
        this._siteWrapper = null;
        this._hamburgerElement = null;
        this._navItems = null;
    };
    return NavigationSide;
}(DomElement));
export function init() {
    searchAndInitialize(".nav-side", function (e) {
        new NavigationSide(e);
    });
}
export default NavigationSide;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4vc3JjL25hdmlnYXRpb24vTmF2aWdhdGlvblNpZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxjQUFjLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDOUQsT0FBTyxLQUFLLE1BQU0sU0FBUyxDQUFBO0FBQzNCLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxNQUFNLGlCQUFpQixDQUFBO0FBQ2pFLE9BQU8sVUFBVSxNQUFNLGVBQWUsQ0FBQTtBQUV0QyxJQUFNLFVBQVUsR0FBRyxTQUFTLENBQUE7QUFDNUIsSUFBTSxZQUFZLEdBQUcsV0FBVyxDQUFBO0FBRWhDLElBQU0sa0JBQWtCLEdBQUcsa0JBQWtCLENBQUE7QUFDN0MsSUFBTSxtQkFBbUIsR0FBRyxnQ0FBZ0MsQ0FBQTtBQUU1RCxJQUFNLGNBQWMsR0FBRyxjQUFjLENBQUE7QUFFckMsSUFBTSxzQkFBc0IsR0FBRyxHQUFHLENBQUE7QUFDbEMsSUFBTSx3QkFBd0IsR0FBRyxHQUFHLENBQUE7QUFDcEMsSUFBTSxzQkFBc0IsR0FBRyxHQUFHLENBQUE7QUFFbEMsSUFBTSx1QkFBdUIsR0FBRyxFQUFFLENBQUE7QUFFbEM7O0dBRUc7QUFDSDtJQUE2QiwwQ0FBVTtJQVFyQyx3QkFBWSxPQUFnQjtRQUE1QixZQUNFLGtCQUFNLE9BQU8sQ0FBQyxTQVVmO1FBUkMsS0FBSSxDQUFDLGFBQWEsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsQ0FBQTtRQUNqRCxLQUFJLENBQUMsbUJBQW1CLEdBQUcsS0FBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsQ0FBQTtRQUU3RCxLQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUUsQ0FBQTtRQUMvRCxLQUFJLENBQUMsaUJBQWlCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxtQkFB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Q29udGVudCI6WyJpbXBvcnQgeyBzZWFyY2hBbmRJbml0aWFsaXplLCBwcmV2ZW50RGVmYXVsdCB9IGZyb20gXCIuLi9VdGlsc1wiXG5pbXBvcnQgYW5pbWUgZnJvbSBcImFuaW1lanNcIlxuaW1wb3J0IHsgaGFzQ2xhc3MsIGFkZENsYXNzLCByZW1vdmVDbGFzcyB9IGZyb20gXCIuLi9Eb21GdW5jdGlvbnNcIlxuaW1wb3J0IERvbUVsZW1lbnQgZnJvbSBcIi4uL0RvbUVsZW1lbnRcIlxuXG5jb25zdCBDTEFTU19PUEVOID0gXCJpcy1vcGVuXCJcbmNvbnN0IENMQVNTX0FDVElWRSA9IFwiaXMtYWN0aXZlXCJcblxuY29uc3QgUVVFUllfU0lURV9XUkFQUEVSID0gXCIuanMtc2l0ZS13cmFwcGVyXCJcbmNvbnN0IFFVRVJZX05BVl9IQU1CVVJHRVIgPSBcIi5qcy1zaXRlLXdyYXBwZXIgLmpzLWhhbWJ1cmdlclwiXG5cbmNvbnN0IFFVRVJZX05BVl9JVEVNID0gXCIuanMtbmF2LWl0ZW1cIlxuXG5jb25zdCBOQVZfTElOS19JTklUSUFMX1NDQUxFID0gMC45XG5jb25zdCBBTklNQVRJT05fRFVSQVRJT05fTElOS1MgPSAxMDBcbmNvbnN0IEFOSU1BVElPTl9EVVJBVElPTl9OQVYgPSAzMDBcblxuY29uc3QgQU5JTUFUSU9OX1NUQUdHRVJfREVMQVkgPSA1MFxuXG4vKipcbiAqIFRoZSBuYXZpZ2F0aW9uIHNpZGUgY29tcG9uZW50IGRlZmluaXRpb24uXG4gKi9cbmNsYXNzIE5hdmlnYXRpb25TaWRlIGV4dGVuZHMgRG9tRWxlbWVudCB7XG4gIHByaXZhdGUgX2NsaWNrSGFuZGxlcjogKGV2ZW50OiBFdmVudCkgPT4gdm9pZFxuICBwcml2YXRlIF93aW5kb3dDbGlja0hhbmRsZXI6IChldmVudDogRXZlbnQpID0+IHZvaWRcblxuICBwcml2YXRlIF9zaXRlV3JhcHBlcjogRWxlbWVudFxuICBwcml2YXRlIF9oYW1idXJnZXJFbGVtZW50OiBFbGVtZW50XG4gIHByaXZhdGUgX25hdkl0ZW1zOiBOb2RlTGlzdE9mPEVsZW1lbnQ+XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudDogRWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpXG5cbiAgICB0aGlzLl9jbGlja0hhbmRsZXIgPSB0aGlzLl9oYW5kbGVDbGljay5iaW5kKHRoaXMpXG4gICAgdGhpcy5fd2luZG93Q2xpY2tIYW5kbGVyID0gdGhpcy5faGFuZGxlV2luZG93Q2xpY2suYmluZCh0aGlzKVxuXG4gICAgdGhpcy5fc2l0ZVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFFVRVJZX1NJVEVfV1JBUFBFUikhXG4gICAgdGhpcy5faGFtYnVyZ2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUVVFUllfTkFWX0hBTUJVUkdFUikgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIHRoaXMuX25hdkl0ZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoUVVFUllfTkFWX0lURU0pIVxuXG4gICAgdGhpcy5faW5pdGlhbGl6ZSgpXG4gIH1cblxuICBwcm90ZWN0ZWQgX2luaXRpYWxpemUoKSB7XG4gICAgdGhpcy5faGFtYnVyZ2VyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xpY2tIYW5kbGVyKVxuICAgIHRoaXMuX2hhbWJ1cmdlckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX2NsaWNrSGFuZGxlcilcbiAgfVxuXG4gIHByb3RlY3RlZCBfaGFuZGxlQ2xpY2soZXZlbnQ6IEV2ZW50KSB7XG4gICAgcHJldmVudERlZmF1bHQoZXZlbnQpXG4gICAgdGhpcy50b2dnbGUoKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9oYW5kbGVXaW5kb3dDbGljayhldmVudDogRXZlbnQpIHtcbiAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEVsZW1lbnRcblxuICAgIHdoaWxlICh0YXJnZXQgIT09IHRoaXMuZWxlbWVudCAmJiB0YXJnZXQucGFyZW50RWxlbWVudCkge1xuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0ICE9PSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBzaWRlIG5hdmlnYXRpb24uXG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlKCkge1xuICAgIGlmIChoYXNDbGFzcyh0aGlzLmVsZW1lbnQsIENMQVNTX09QRU4pID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5vcGVuKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBzbGlkZSBuYXZpZ2F0aW9uLlxuICAgKi9cbiAgcHVibGljIG9wZW4oKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX3dpbmRvd0NsaWNrSGFuZGxlcilcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fd2luZG93Q2xpY2tIYW5kbGVyKVxuICAgIH0sIDUwKVxuXG4gICAgYWRkQ2xhc3ModGhpcy5faGFtYnVyZ2VyRWxlbWVudCwgQ0xBU1NfQUNUSVZFKVxuICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudCwgQ0xBU1NfT1BFTilcbiAgICBhZGRDbGFzcyh0aGlzLl9zaXRlV3JhcHBlciwgQ0xBU1NfT1BFTilcblxuICAgIGNvbnN0IHggPSBhbmltZS50aW1lbGluZSgpXG4gICAgbGV0IG9mZiA9IEFOSU1BVElPTl9EVVJBVElPTl9OQVZcbiAgICB0aGlzLl9uYXZJdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBjb25zdCBlbCA9IGVsZW1lbnQgYXMgSFRNTEVsZW1lbnRcbiAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgZWwuc3R5bGUudHJhbnNmb3JtID0gYHNjYWxlKCR7TkFWX0xJTktfSU5JVElBTF9TQ0FMRX0pYFxuICAgICAgeC5hZGQoe1xuICAgICAgICB0YXJnZXRzOiBlbCxcbiAgICAgICAgZHVyYXRpb246IEFOSU1BVElPTl9EVVJBVElPTl9MSU5LUyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcbiAgICAgICAgb2Zmc2V0OiBvZmZcbiAgICAgIH0pXG4gICAgICBvZmYgKz0gQU5JTUFUSU9OX1NUQUdHRVJfREVMQVlcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgc2lkZSBuYXZpZ2F0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsb3NlKCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fd2luZG93Q2xpY2tIYW5kbGVyKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fd2luZG93Q2xpY2tIYW5kbGVyKVxuXG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5faGFtYnVyZ2VyRWxlbWVudCwgQ0xBU1NfQUNUSVZFKVxuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudCwgQ0xBU1NfT1BFTilcbiAgICByZW1vdmVDbGFzcyh0aGlzLl9zaXRlV3JhcHBlciwgQ0xBU1NfT1BFTilcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgY29tcG9uZW50IGFuZCByZW1vdmVzIGFsbCBldmVudFxuICAgKiBzdWJzY3JpcHRpb25zIGFuZCByZWZlcmVuY2VzLlxuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl93aW5kb3dDbGlja0hhbmRsZXIpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl93aW5kb3dDbGlja0hhbmRsZXIpO1xuXG4gICAgKHRoaXMgYXMgYW55KS5fd2luZG93Q2xpY2tIYW5kbGVyID0gbnVsbDtcblxuICAgICh0aGlzIGFzIGFueSkuX2NsaWNrSGFuZGxlciA9IG51bGw7XG4gICAgKHRoaXMgYXMgYW55KS5fc2l0ZVdyYXBwZXIgPSBudWxsO1xuXG4gICAgKHRoaXMgYXMgYW55KS5faGFtYnVyZ2VyRWxlbWVudCA9IG51bGw7XG4gICAgKHRoaXMgYXMgYW55KS5fbmF2SXRlbXMgPSBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIHNlYXJjaEFuZEluaXRpYWxpemUoXCIubmF2LXNpZGVcIiwgKGUpID0+IHtcbiAgICBuZXcgTmF2aWdhdGlvblNpZGUoZSlcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgTmF2aWdhdGlvblNpZGVcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4vLi4ifQ==
