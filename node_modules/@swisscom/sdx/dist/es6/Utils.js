import * as tslib_1 from "tslib";
/**
 * Calls the callback function when the document has been completely parsed.
 * @param {callback} value The callback function to execute.
 */
export function onDocumentReady(callback) {
    function completed() {
        document.removeEventListener("DOMContentLoaded", completed, false);
        window.removeEventListener("load", completed, false);
        callback();
    }
    if (document.readyState === "complete") {
        setTimeout(callback);
    }
    else {
        document.addEventListener("DOMContentLoaded", completed, false);
        // A fallback to window.onload, that will always work
        window.addEventListener("load", completed, false);
    }
}
export function searchAndInitialize(selector, callback, initSelector) {
    var e_1, _a;
    if (!callback) {
        throw new Error("The callback cannot be undefined");
    }
    var elements = document.querySelectorAll(selector);
    try {
        for (var elements_1 = tslib_1.__values(elements), elements_1_1 = elements_1.next(); !elements_1_1.done; elements_1_1 = elements_1.next()) {
            var e = elements_1_1.value;
            var initElement = e;
            if (initSelector) {
                initElement = initSelector(e);
            }
            if (initElement.getAttribute("data-init") === "auto") {
                callback(e);
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (elements_1_1 && !elements_1_1.done && (_a = elements_1.return)) _a.call(elements_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
}
/**
 * Returns a number whose value is limited to the given range.
 *
 * Example: limit the output of this computation to between 0 and 255
 * Utils.clamp(number, 0, 255)
 *
 * @param {Number} value The number to clamp
 * @param {Number} min The lower boundary of the output range
 * @param {Number} max The upper boundary of the output range
 * @returns A number in the range [min, max]
 * @type Number
 */
export function clamp(value, min, max) {
    return Math.min(Math.max(value, min), max);
}
/**
 * A polyfill for Event.preventDefault().
 * @param {Event} event - The event to prevent the default action.
 */
export function preventDefault(event) {
    if (event.preventDefault) {
        event.preventDefault();
    }
    else {
        event.returnValue = false;
    }
}
/**
 * A polyfill for Node.remove().
 * @param {Node} node - The node to remove.
 */
export function remove(node) {
    if (!node || !node.parentNode) {
        return;
    }
    node.parentNode.removeChild(node);
}
/**
 * A simple polyfill for the Array.find() method.
 * @param {Array} array - The array to search in.
 * @param {function} expression - The expression to evaluate. Must return true if the element matches.
 */
export function find(array, expression) {
    for (var i = 0; i < array.length; i++) {
        var item = array[i];
        if (expression(item) === true) {
            return item;
        }
    }
    return undefined;
}
/**
 * Checks the useragent and returns the Microsoft Internet Explorer / Edge version.
 * If another browser is detected 0 is returned.
 */
export function internetExplorerOrEdgeVersion(userAgent) {
    if (userAgent === void 0) { userAgent = navigator.userAgent; }
    // handle IE and Edge
    var ieOrEdge = userAgent.search(/MSIE |Edge[/]/);
    if (ieOrEdge > 0) {
        return parseInt(userAgent.substring(ieOrEdge + 5, userAgent.indexOf(".", ieOrEdge)), 10);
    }
    // handle IE11
    if (userAgent.indexOf("Trident/") > 0) {
        var rv = userAgent.indexOf("rv:");
        return parseInt(userAgent.substring(rv + 3, userAgent.indexOf(".", rv)), 10);
    }
    return 0;
}
/**
 * Tries to move a child element to the top by scrolling the parent element, if it is not already fully visible.
 */
export function scrollIntoView(child) {
    var parent = child.parentNode;
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    var isFullyVisible = childRect.top >= parentRect.top && childRect.bottom <= parentRect.top + parent.clientHeight;
    if (!isFullyVisible) {
        parent.scrollTop = childRect.top + parent.scrollTop - parentRect.top;
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QTtJQUVsSCxJQUFJLENBQUMsY0FBYyxFQUFFO1FBQ25CLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUE7S0FDckU7QUFDSCxDQUFDIiwiZmlsZSI6Im1haW4vc3JjL1V0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gY29tcGxldGVseSBwYXJzZWQuXG4gKiBAcGFyYW0ge2NhbGxiYWNrfSB2YWx1ZSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZXhlY3V0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9uRG9jdW1lbnRSZWFkeShjYWxsYmFjazogKGU/OiBFdmVudCkgPT4gdm9pZCkge1xuICBmdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSlcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSlcbiAgICBjYWxsYmFjaygpXG4gIH1cblxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgc2V0VGltZW91dChjYWxsYmFjaylcbiAgfSBlbHNlIHtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UpXG5cbiAgICAvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlKVxuICB9XG59XG5cbi8qKlxuICogU2VhcmNoZXMgZm9yIGVsZW1lbnRzIHdpdGggdGhlIGdpdmVuIHNlbGVjdG9yIGFuZCBjYWxscyB0aGUgY2FsbGJhY2tcbiAqIGZ1bmN0aW9uIGlmIHRoZSBgZGF0YS1pbml0YCBhdHRyaWJ1dGUgaXMgcHJlc2VudCBvbiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7c2VsZWN0b3J9IHZhbHVlIFRoZSBxdWVyeS5cbiAqIEBwYXJhbSB7Y2FsbGJhY2t9IHZhbHVlIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gaW5pdFNlbGVjdG9yIFRoZSBpbml0aXRhbGl6YXRpb24gZWxlbWVudCBzZWxlY3RvciBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEFuZEluaXRpYWxpemU8XG4gIEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXBcbiAgPihcbiAgICBzZWxlY3RvcjogSyxcbiAgICBjYWxsYmFjazogKGVsOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10pID0+IHZvaWQsXG4gICAgaW5pdFNlbGVjdG9yPzogKGVsOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10pID0+IEVsZW1lbnRcbiAgKTogdm9pZFxuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEFuZEluaXRpYWxpemU8XG4gIEUgZXh0ZW5kcyBFbGVtZW50XG4gID4oXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcbiAgICBjYWxsYmFjazogKGVsOiBFKSA9PiB2b2lkLFxuICAgIGluaXRTZWxlY3Rvcj86IChlbDogRSkgPT4gRWxlbWVudFxuICApOiB2b2lkXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoQW5kSW5pdGlhbGl6ZShcbiAgc2VsZWN0b3I6IHN0cmluZyxcbiAgY2FsbGJhY2s6IChlbDogRWxlbWVudCkgPT4gdm9pZCxcbiAgaW5pdFNlbGVjdG9yPzogKGVsOiBFbGVtZW50KSA9PiBFbGVtZW50XG4pOiB2b2lkIHtcbiAgaWYgKCFjYWxsYmFjaykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBjYWxsYmFjayBjYW5ub3QgYmUgdW5kZWZpbmVkXCIpXG4gIH1cblxuICBsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSBhcyBOb2RlTGlzdE9mPEVsZW1lbnQ+XG5cbiAgZm9yIChsZXQgZSBvZiBlbGVtZW50cykge1xuXG4gICAgbGV0IGluaXRFbGVtZW50OiBFbGVtZW50ID0gZVxuXG4gICAgaWYgKGluaXRTZWxlY3Rvcikge1xuICAgICAgaW5pdEVsZW1lbnQgPSBpbml0U2VsZWN0b3IoZSlcbiAgICB9XG5cbiAgICBpZiAoaW5pdEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbml0XCIpID09PSBcImF1dG9cIikge1xuICAgICAgY2FsbGJhY2soZSlcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIHdob3NlIHZhbHVlIGlzIGxpbWl0ZWQgdG8gdGhlIGdpdmVuIHJhbmdlLlxuICpcbiAqIEV4YW1wbGU6IGxpbWl0IHRoZSBvdXRwdXQgb2YgdGhpcyBjb21wdXRhdGlvbiB0byBiZXR3ZWVuIDAgYW5kIDI1NVxuICogVXRpbHMuY2xhbXAobnVtYmVyLCAwLCAyNTUpXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIFRoZSBudW1iZXIgdG8gY2xhbXBcbiAqIEBwYXJhbSB7TnVtYmVyfSBtaW4gVGhlIGxvd2VyIGJvdW5kYXJ5IG9mIHRoZSBvdXRwdXQgcmFuZ2VcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXggVGhlIHVwcGVyIGJvdW5kYXJ5IG9mIHRoZSBvdXRwdXQgcmFuZ2VcbiAqIEByZXR1cm5zIEEgbnVtYmVyIGluIHRoZSByYW5nZSBbbWluLCBtYXhdXG4gKiBAdHlwZSBOdW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcikge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heClcbn1cblxuLyoqXG4gKiBBIHBvbHlmaWxsIGZvciBFdmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldmVudDogRXZlbnQpIHtcbiAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9IGVsc2Uge1xuICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2VcbiAgfVxufVxuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIE5vZGUucmVtb3ZlKCkuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgbm9kZSB0byByZW1vdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUobm9kZTogTm9kZSkge1xuICBpZiAoIW5vZGUgfHwgIW5vZGUucGFyZW50Tm9kZSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpXG59XG5cbi8qKlxuICogQSBzaW1wbGUgcG9seWZpbGwgZm9yIHRoZSBBcnJheS5maW5kKCkgbWV0aG9kLlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZXhwcmVzc2lvbiAtIFRoZSBleHByZXNzaW9uIHRvIGV2YWx1YXRlLiBNdXN0IHJldHVybiB0cnVlIGlmIHRoZSBlbGVtZW50IG1hdGNoZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kPFQgPSBhbnk+KFxuICBhcnJheTogVFtdIHwgeyBsZW5ndGg6IG51bWJlciwgW2k6IG51bWJlcl06IFQgfSxcbiAgZXhwcmVzc2lvbjogKGl0ZW06IFQpID0+IGJvb2xlYW5cbikge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IGl0ZW0gPSBhcnJheVtpXVxuICAgIGlmIChleHByZXNzaW9uKGl0ZW0pID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuLyoqXG4gKiBDaGVja3MgdGhlIHVzZXJhZ2VudCBhbmQgcmV0dXJucyB0aGUgTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyIC8gRWRnZSB2ZXJzaW9uLlxuICogSWYgYW5vdGhlciBicm93c2VyIGlzIGRldGVjdGVkIDAgaXMgcmV0dXJuZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm5ldEV4cGxvcmVyT3JFZGdlVmVyc2lvbih1c2VyQWdlbnQ6IHN0cmluZyA9IG5hdmlnYXRvci51c2VyQWdlbnQpIHtcbiAgLy8gaGFuZGxlIElFIGFuZCBFZGdlXG4gIGNvbnN0IGllT3JFZGdlID0gdXNlckFnZW50LnNlYXJjaCgvTVNJRSB8RWRnZVsvXS8pXG4gIGlmIChpZU9yRWRnZSA+IDApIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodXNlckFnZW50LnN1YnN0cmluZyhpZU9yRWRnZSArIDUsIHVzZXJBZ2VudC5pbmRleE9mKFwiLlwiLCBpZU9yRWRnZSkpLCAxMClcbiAgfVxuICAvLyBoYW5kbGUgSUUxMVxuICBpZiAodXNlckFnZW50LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDApIHtcbiAgICBjb25zdCBydiA9IHVzZXJBZ2VudC5pbmRleE9mKFwicnY6XCIpXG4gICAgcmV0dXJuIHBhcnNlSW50KHVzZXJBZ2VudC5zdWJzdHJpbmcocnYgKyAzLCB1c2VyQWdlbnQuaW5kZXhPZihcIi5cIiwgcnYpKSwgMTApXG4gIH1cblxuICByZXR1cm4gMFxufVxuXG4vKipcbiAqIFRyaWVzIHRvIG1vdmUgYSBjaGlsZCBlbGVtZW50IHRvIHRoZSB0b3AgYnkgc2Nyb2xsaW5nIHRoZSBwYXJlbnQgZWxlbWVudCwgaWYgaXQgaXMgbm90IGFscmVhZHkgZnVsbHkgdmlzaWJsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KGNoaWxkOiBIVE1MRWxlbWVudCkge1xuICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50XG4gIGNvbnN0IHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgY29uc3QgY2hpbGRSZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgY29uc3QgaXNGdWxseVZpc2libGUgPSBjaGlsZFJlY3QudG9wID49IHBhcmVudFJlY3QudG9wICYmIGNoaWxkUmVjdC5ib3R0b20gPD0gcGFyZW50UmVjdC50b3AgKyBwYXJlbnQuY2xpZW50SGVpZ2h0XG5cbiAgaWYgKCFpc0Z1bGx5VmlzaWJsZSkge1xuICAgIHBhcmVudC5zY3JvbGxUb3AgPSBjaGlsZFJlY3QudG9wICsgcGFyZW50LnNjcm9sbFRvcCAtIHBhcmVudFJlY3QudG9wXG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4ifQ==
