@import "stylesheets/sdx/variables/sizes";
@import "stylesheets/sdx/variables/colors";
@import "stylesheets/sdx/variables/typography";
@import "stylesheets/sdx/mixins/typography";
@import "stylesheets/sdx/utilities/screenreaders";

$dimension-small: 64px;
$dimension-medium: 182px;
$metadata-padding-small: $baseline; // padding towards inside text
$metadata-padding-medium: $baseline * 3; // padding towards inside text

.component {
  display: flex;
  justify-content: center;

  &.small {
    .wrapper {
      .chart-container {
        .chart {
          height: $dimension-small;
          width: $dimension-small;

          svg {
            height: $dimension-small;
            width: $dimension-small;
            stroke-linecap: butt;
          }
        }

        .metadata {
          font-size: 16px;
          top: $metadata-padding-small;
          right: $metadata-padding-small;
          bottom: $metadata-padding-small;
          left: $metadata-padding-small;
        }
      }
    }
  }

  &.bottom {
    .wrapper {
      flex-direction: column;
      flex-basis: 100%; // IE11 (for .legend "flex-wrap")

      .legend {
        margin-top: $baseline * 3;
        flex-wrap: wrap;
        width: 100%; // IE11 (for .legend "flex-wrap")

        li {
          &:not(:last-of-type) {
            margin-right: $baseline * 3;
          }
        }
      }
    }
  }

  &.right {
    .wrapper {
      .legend {
        margin-left: $baseline * 4;
        flex-direction: column;

        li {
          &:not(:last-of-type) {
            margin-bottom: $baseline;
          }
        }
      }
    }
  }

  &.dark {
    .wrapper {
      .chart-container {
        .metadata {
          &, .description {
            color: white;
          }
        }
      }
    }
  }

  .wrapper {
    display: flex;
    align-items: center;

    .chart-container {
      position: relative; // for .metadata

      .chart {
        transform: rotate(-90deg);
        height: $dimension-medium;
        width: $dimension-medium;

        svg {
          position: absolute;
          top: 0;
          left: 0;
          fill: transparent;
          stroke-width: 2;
          stroke-linecap: round;

          // IE11: set dimension again (even though they're
          // already set on .chart), otherwise it resizes:
          height: $dimension-medium;
          width: $dimension-medium;
        }
      }

      .metadata {
        @include typo-pie-chart-title;
        position: absolute;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        top: $metadata-padding-medium + $baseline;
        right: $metadata-padding-medium;
        bottom: $metadata-padding-medium;
        left: $metadata-padding-medium;

        .description {
          font-size: 16px;
          color: $color-gray-tint-4;
          white-space: nowrap;
          width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          text-align: center;
        }
      }
    }

    .legend {
      display: flex;
      list-style: none;
      padding: 0;
      font-weight: 300;
      justify-content: center;
      margin: 0;

      li {
        white-space: nowrap;
      }
    }
  }
}
